## 倒排索引

倒排索引是 ES 中非常重要的索引结构, 是从文档词项到文档id的一个映射过程.

“正排索引”: 我们在关系型数据库中见到的索引

 假设有一张博客表:

| id   | title  | content |
| ---- | ------ | ------- |
| 1    | python | xxxx    |
| 2    | java   | xxxx    |
| 3    | java   | xxxx    |

可以针对title建立索引:

| index    | content |
| -------- | ------- |
| 1,python | xxxx    |
| 2,3,java | xxxx    |

当我们通过id或者title去搜索文章时,就可以快速搜索到

但是如果我们按照博客的内容的关键字进行搜索时, 就只能去内容中做字符匹配了, 为了提高查询效率, 就要考虑用到倒排索引.

<br>

### 倒排索引

倒排索引就是以内容的关键字建立索引, 通过索引找到id, 进而找到整个文档.

| index  | doc1 | doc2 | doc3 |
| ------ | ---- | ---- | ---- |
| python | ✅    | ✅    | ✅    |
| java   | ✅    | ✅    |      |
| go     |      |      |      |

一般来说, 倒排索引包含两个部分:

1. 单词词典: 记录所有的文档词项, 以及词项到 倒排列表的关联关系.
2. 倒排列表: 由一系列倒排索引项组成, 倒排索引项指: 文档id, TF(词频), 位置(Position, 词项在文档中分词的位置), 偏移(记录词项开始和结束的位置)

当我们去索引一个文档时, 就会建立倒排索引, 搜索时, 直接根据倒排索引进行搜索.

<br><br><br>





###### 完~